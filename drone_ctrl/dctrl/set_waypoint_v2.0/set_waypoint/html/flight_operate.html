<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
		<!-- Font Awesome Icon Kit -->
        <link rel="stylesheet" href="../css/lib/fontawesome-free-5.15.2-web.all.min.css">

        <!-- Bootstrap CSS -->
        <link rel="stylesheet" href="../css/lib/bootstrap.min.css" >
        
        <!-- MapBox JS CSS -->
        <script src='https://api.mapbox.com/mapbox-gl-js/v2.6.1/mapbox-gl.js'></script>
        <link href='https://api.mapbox.com/mapbox-gl-js/v2.6.1/mapbox-gl.css' rel='stylesheet' />
        <script src='https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-draw/v1.3.0/mapbox-gl-draw.js'></script>
        <link rel='stylesheet' href='https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-draw/v1.3.0/mapbox-gl-draw.css' type='text/css' />
        <script src="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.7.2/mapbox-gl-geocoder.min.js"></script>
        <link rel="stylesheet" href="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.7.2/mapbox-gl-geocoder.css" type="text/css">
        
        <!-- Custom CSS --> 
        <link rel="stylesheet" href="../css/src/common.css">
        <link rel="stylesheet" href="../css/src/sidebar.css">
        <link rel="stylesheet" href="../css/src/common_mapbox.css" >
		<link rel="stylesheet" href="../css/src/flight_operate.css">
		
		<title>フライト操作</title>
		
	</head>
	<body>
	  <header id="header"></header>
	  <!-- Contents Start -->
      <div id="contents">
	  	<!-- Modal Start -->
          <div class="modal fade " id="modal" tabindex="-1" role="dialog" aria-labelledby="modal-title" aria-hidden="true">
             <div class="modal-dialog modal-dialog-centered" role="document">
                 <div class="modal-content">
                     <h4 class="modal-title" id="modal-title"></h4>
                     <div class="modal-body mt-4" style="padding: 0rem !important;vertical-align: middle;" id="modal-body"></div>
                     
                     <div class="mt-4 mb-4 position-relative" style="left:18%">
                     	<button type="button" class="btn btn-secondary" style="width: 140px;" data-dismiss="modal">キャンセル</button>
                     	<button type="button" class="btn btn-success ml-5" style="width: 140px;" id="execute"></button>
                     </div>
                 </div>
             </div>
        </div>
        <!-- Modal End -->
        
        <!-- Modal confirm Start -->
        <div class="modal fade" id="modal-confirm" tabindex="-1" aria-labelledby="modal-title" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered" >
                <div class="modal-content">
                   <div class="modal-body confirm-msg"  id="modal-confirm-body"></div>
                    <div class="mt-4 mb-4 position-relative" style="left:29%">
                    	<button type="button" class="btn btn-secondary" style="width: 80px;" data-dismiss="modal">いいえ</button>
                    	<button type="button" class="btn btn-success ml-5" style="width: 80px;" data-dismiss="modal" id="dialog_ok">はい</button>
                    </div>
               </div>
            </div>
        </div>
        <!-- Modal confirm End -->
         
        <!-- Map area Start -->
        	 <div  id='map'></div>
        <!-- Map area End -->
        
        <!-- video start  -->
		<div class="fl-video-normal" id="fl-video">
			<!-- <video id="video-element" src="../media/drone.webm" width="100%" autoplay="autoplay" controls
				x5-playsinline="true" x5-video-player-type="h5-page" webkit-playsinline="true"
				playsinline="true" currentTime="100" muted loop >
			</video> -->
			
			<video id="video-element"   preload="none"  autoplay="autoplay"  width="100%"   muted loop>
				<source src="../media/drone.webm" type="video/mp4">
			</video>
		</div>
		<!-- video end  -->
		<a class="arrow-right-rotate" id="wipeMapDisplayControl"></a>
      	
      	<!-- alert area start  -->
      	<div id = "alert_area" style="display:none;">
	      	<div class="alert-box alert alert-warning alert-dismissable" style="bottom:70px;display:none;" >
			  <button type="button" class="close" data-dismiss="alert">&times;</button>
			  <strong>アラート内容２</strong>
			</div>
	        <div class="alert-box alert alert-warning alert-dismissable" style="display:none;">
			  <button type="button" class="close" data-dismiss="alert">&times;</button>
			  <strong>アラート内容１</strong>
			</div>
		</div>
		<!-- alert area end  -->
		
	  </div>
      <!-- Contents End -->
      
      <!-- Sidebar Start -->
	  <div class="sidebar_left" id="control_sidebar_left" style="z-index:5;">
			<div class="ml-2 mt-1"><strong>表示中の機体：<span id="aircraftName"></span></strong></div>
			<table class="ml-4 mt-2 w-75"  style="font-weight: bold;border-collapse: separate; border-spacing: 0px 5px;" id="telemetryTable">
				<tr id="LTESignalStrengthLine" >
					<td>電波強度</td>
					<td id="LTESignalStrength" class="text-center"></td>
				</tr>
				<tr id="batteryRemainingLine">
					<td>電池残量</td>
					<td id="batteryRemaining" class="text-center"></td>
				</tr>
				<tr id="GPSSatellitesCntLine">
					<td>GPS接続数</td>
					<td id="GPSSatellitesCnt" class="text-center"></td>
				</tr>
				<tr id="RTKStatusLine">
					<td>RTK接続数</td>
					<td id="RTKStatus" class="text-center"></td>
				</tr>
			</table>
			<div class="ml-4 mt-2" >
				<div>緯度:<span id="flightLat" ></span></div>
				<div>経度:<span id="flightLng" ></span></div>
				<div>高度:<span id="flightHeight"></span></div>
				<div>速度:<span id="flightSpeed"></span></div>
				<!-- <div>完了予定時刻:<span id="completionEstimatedFlightDuration"></span></div>  -->
				<!-- <div>写真枚数:<span id="photoCnt"></span></div>  -->
				<div>方位:<span id="flightAngle"></span></div>
			</div>
	
			<div id="operatation_area" class="mt-3">
				<div class="position-relative bg-secondary" style="height: 1px;"></div>
				<!-- <div id="flight_plan_info">
					<span class="ml-2 mt-1"><strong>飛行計画情報</strong></span><br>
					<span class="ml-4" id="selectedflightRoute"></span><br>
					<div class="ml-4">操縦者：<span id="operator"></span></div>
					<div class="ml-4">飛行地点：<span id="addressLngLat"></span></div>
					<div class="ml-4">飛行日時：<span id="flyDateTime"></span></div>
					<br>
				</div>
				<a  class = "ml-4 mt-3 text-center h6 flight-route-select"  id="flight_route_select" ><strong>フライトルートを選択</strong></a>
				<div class="position-relative bg-secondary mt-4" style="height: 0.5px;"></div>  -->

				<button class="btn btn-success rounded ml-4 mt-2" id="mission_ready" value="top" >ARM</button>

				<div class="position-relative bg-secondary mt-2" style="height: 0.5px;"></div>			

				<button class="btn btn-success rounded ml-4 mt-2" id="mission_ready" value="top" >GUIDED</button><br/>
				<button class="btn btn-success rounded ml-4 mt-2" id="mission_ready" value="top" >AUTO</button><br/>
				<button class="btn btn-success rounded ml-4 mt-2" id="mission_ready" value="top" >RTL</button>

				<div class="position-relative bg-secondary mt-2" style="height: 0.5px;"></div>
				
				<button class="btn btn-success rounded ml-4 mt-2" id="mission_ready" value="top" >TAKEOFF</button><br/>
				<button class="btn btn-success rounded ml-4 mt-2" id="mission_ready" value="top" >LAND</button><br/>
				<button class="btn btn-success rounded ml-4 mt-2" id="mission_ready" value="top" >PAUSE</button><br/>
				<button class="btn btn-success rounded ml-4 mt-2" id="mission_ready" value="top" >RESUME</button>

				<div class="position-relative bg-secondary mt-2" style="height: 0.5px;"></div>

				<button class="btn btn-success rounded ml-4 mt-2" id="mission_ready" value="top" >ミッション実行準備</button>
				<button class="btn btn-success rounded ml-4 mt-2" id="mission_execute" value="top" disabled >ミッション実行</button>
				<button class="btn btn-warning rounded ml-4 mt-2 d-none" id="mission_break">ミッション中断</button>
				
				<div class="btn-group ml-4 mt-2 d-none" id="mission_break_btn_group">
					<button type="button" class="btn btn-primary" style="width:140px" id="mission_control">ホーム帰還
					</button>
					<button type="button" class="btn btn-primary dropdown-toggle dropdown-toggle-split border-left" data-toggle="dropdown" aria-expanded="false"  id="mission_control_dropdown">
						<span class="sr-only">Toggle Dropdown</span>
					</button>
					<div class="dropdown-menu dropdown-menu-right">
						<a class="dropdown-item btn border border-primary bg-primary h4 text-center ml-2" style="width:90%" id="mission_rth" >ホーム帰還</a> 
						<!-- <a class="dropdown-item btn border border-danger bg-danger h4 text-center ml-2" style="width:90%" id="mission_el">緊急着陸</a> -->
						<a class="dropdown-item btn border border-success bg-success h4 text-center ml-2" style="width:90%" id="mission_fr">ミッション再開</a>
					</div>
				</div>
				
				<div class="position-relative bg-secondary mt-2" style="height: 0.5px;"></div>
				<!-- 
				<a class="nav-item nav-link text-nowrap text-primary" style="padding: 0.5rem 0.5rem!important;font-size: 13px;" id="flightStatusShareLink" data-toggle="tooltip"><i class="fas fa-share-alt fa-lg"></i>&nbsp;フライト状況共有リンクを発行</a>
				 -->
				<div id="temp"></div>
		</div>
	  </div>
	  <a class="side_btn" id="btn_list" style="z-index:5;"></a>
	  
	  <!-- レイヤ -->
      <a class="nav-item layer-icon" id="btn_layer" style="z-index:5;"></a>
      <div class="nav-item layer-nav" id="layer_nav" style="z-index:5;">
      	<a class="layer-terrain-icon" id="layer_terrain"></a>
      	<a class="layer-traffic-icon" id="layer_traffic"></a>
      	<a class="layer-transit-icon" id="layer_transit"></a>
      	<a class="layer-more-icon" id="layer_more"></a>
      	<a class="layer-did-icon" id="layer_did"></a>
      </div>
	  
    <!-- 天候表示ここから コメントアウト中
    <div class="wether_panel">
      <div class="location"></div>
      <div></div>
      <div class=" d-flex justify-content-center wether_info">
        <div class="wether align-self-center"></div>&nbsp;&nbsp;
        <div class="temperature align-self-center"></div>&nbsp;&nbsp;
        <div class="wind align-self-center"></div>
      </div>
    </div>
    天候表示ここまで -->
	  
	  
	  <!-- Sidebar End -->
      
	 <!-- <footer id="footer"></footer> -->
	 
    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script type="text/javascript" src="../js/lib/jquery-3.5.1.min.js" ></script>
    <script type="text/javascript" src="../js/lib/popper.min.js" ></script>
    <script type="text/javascript" src="../js/lib/bootstrap.min.js" ></script>

    <!-- MQTT over Websocketを使うライブラリ(.js)を読み込む）  -->
    <script src="../js/lib/mqttws31.js" type="text/javascript"></script>
    
    <!-- Custom JS --> 
    <!-- <script type="text/javascript" src="../js/src/common.js"></script> -->
    <script type="text/javascript" src="../js/src/common_mapbox.js"></script>	
    <script type="text/javascript" src="../js/src/flight_operate.js"></script>
    <script type="text/javascript" src="../js/src/sidebar.js"></script>
</body>
</html>